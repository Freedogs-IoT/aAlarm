{% extends "templateAAlarm.html" %}

{% block title %}aAlarm - Home{% endblock %}

{% block css %}
{% endblock %}

{% block script %}
<script type="text/javascript">

    $(document).ready(function(){
        $("#idBtSetOnline").click(function(){
            $.ajax({
                data: $("#idFormCommand").serialize(),
                type: "post",
                url: "command/setOnline",
                success: function(data) {
                    if(data == "ok")
                    {
                        alert("ok");
                    }
                    else
                    {
                        alert("ko");
                    }
                }
            });
            return false;
        });

        $("#idBtSetOffline").click(function(){
            $.ajax({
                data: $("#idFormCommand").serialize(),
                type: "post",
                url: "command/setOffline",
                success: function(response) {
                    alert(response);
                }
            });
            return false;
        });
	});
</script>
{% endblock %}

{% block mainContentTitle %}Home{% endblock %}

{% block mainContent %}

<form name="formCommand" id="idFormCommand">
    {% csrf_token %}
</form>

<div>
    <a id="idBtSetOnline" class="btn btn-success" href="">Set Online</a>
    <a id="idBtSetOffline" class="btn btn-danger" href="">Set Offline</a>
</div>

<h2>Events</h2>
<table>
<th>
    <td></td>
    <td></td>
    <td></td>
</th>
{% for event in listEvents %}
<tr>
<td>{{ event.sensor }}</td>
<td>{{ event.state }}</td>
<td>{{ event.date }}</td>
</tr>
{% endfor %}
</table>

{% endblock %}
